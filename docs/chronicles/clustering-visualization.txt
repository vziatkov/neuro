╔══════════════════════════════════════════════════════════════════════════════╗
║                    КЛАСТЕРИЗАЦИЯ ПАТТЕРНОВ В NEURO PROJECT                  ║
╚══════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────┐
│                         ВХОДНЫЕ ДАННЫЕ (Эмбеддинги)                         │
└─────────────────────────────────────────────────────────────────────────────┘

    📊 Биометрические данные          🎮 Игровое поведение          💭 Эмоции
    ┌──────────────┐                 ┌──────────────┐             ┌──────────────┐
    │  Дыхание     │                 │  Действия    │             │  Состояния   │
    │  Пульс       │  ───────┐       │  Результаты  │  ───────┐   │  Переходы    │  ───────┐
    │  Стресс      │         │       │  Время       │         │   │  Сила        │         │
    └──────────────┘         │       └──────────────┘         │   └──────────────┘         │
                             │                               │                             │
                             └───────────────┬───────────────┴───────────────┬─────────────┘
                                             │                               │
                                             ▼                               ▼
                                    ┌─────────────────┐            ┌─────────────────┐
                                    │   Эмбеддинги    │            │  Векторы 384-   │
                                    │   (LLaMA/T5)    │───────────▶│  1024 dim       │
                                    └─────────────────┘            └─────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                    КОСИНУСНОЕ РАССТОЯНИЕ (Cosine Distance)                  │
└─────────────────────────────────────────────────────────────────────────────┘

    Вектор A  ──────┐
                    │  distance = 1 - cosine_similarity(A, B)
    Вектор B  ──────┘
                    │
                    ▼
            ┌───────────────┐
            │  Матрица      │
            │  расстояний   │
            └───────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                    HDBSCAN-ПОДОБНАЯ КЛАСТЕРИЗАЦИЯ                           │
└─────────────────────────────────────────────────────────────────────────────┘

    Точки в пространстве эмбеддингов:

         •  •     •  •  •
       •    •   •    •    •
      •      • •      •     •
     •        •        •      •
    •                    •       •
   •                      •        •
  •                        •         •

    После кластеризации:

    ┌─────────┐         ┌─────────┐         ┌─────────┐
    │ Кластер │         │ Кластер │         │ Outlier │
    │   1     │         │   2     │         │  (шум)  │
    │         │         │         │         │    •    │
    │   • •   │         │   • •   │         │         │
    │  • • •  │         │  • • •  │         │         │
    │   • •   │         │   • •   │         │         │
    └─────────┘         └─────────┘         └─────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                         РЕЗУЛЬТАТЫ КЛАСТЕРИЗАЦИИ                            │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌─────────────────────────────────────────────────────────────┐
    │  Кластер 1: "Низкий стресс, стабильный пульс"              │
    │  ├─ Члены: 15 биометрических сессий                        │
    │  ├─ Центроид: [0.2, 0.1, 0.05, ...]                       │
    │  ├─ Difficulty: low                                        │
    │  └─ Рекомендация: "Поддерживать текущий режим"            │
    └─────────────────────────────────────────────────────────────┘

    ┌─────────────────────────────────────────────────────────────┐
    │  Кластер 2: "Высокая активность, быстрые действия"         │
    │  ├─ Члены: 8 игровых сессий                                │
    │  ├─ Центроид: [0.8, 0.9, 0.7, ...]                        │
    │  ├─ Difficulty: high                                       │
    │  └─ Рекомендация: "Увеличить сложность"                    │
    └─────────────────────────────────────────────────────────────┘

    ┌─────────────────────────────────────────────────────────────┐
    │  Кластер 3: "Эмоциональный переход: тревога → спокойствие" │
    │  ├─ Члены: 12 эмоциональных логов                          │
    │  ├─ Центроид: [0.6, 0.4, 0.3, ...]                        │
    │  ├─ Difficulty: mid                                        │
    │  └─ Рекомендация: "Мониторить переходы"                    │
    └─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                    ИНТЕГРАЦИЯ С СУЩЕСТВУЮЩИМИ МОДУЛЯМИ                      │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────────┐
    │  Biometric   │──────────┐
    │  Simulator   │          │
    └──────────────┘          │
                              │
    ┌──────────────┐          │      ┌──────────────┐
    │   Swarm      │──────────┼─────▶│  Clustering  │
    │   Impulse    │          │      │    Module    │
    └──────────────┘          │      └──────────────┘
                              │              │
    ┌──────────────┐          │              │
    │  Emotional   │──────────┘              │
    │    Core      │                         │
    └──────────────┘                         │
                                             ▼
                                    ┌──────────────┐
                                    │   Midstreamer│
                                    │  (Real-time) │
                                    └──────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                         ПРИМЕНЕНИЕ В ПРОЕКТЕ                                │
└─────────────────────────────────────────────────────────────────────────────┘

    🎓 Адаптивное обучение:
       Новый ответ ребёнка → Найти кластер → Подобрать сложность

    🎮 Игровая аналитика:
       Игровая сессия → Кластер поведения → Персонализация

    🧬 Биометрические профили:
       Биометрические данные → Кластер стресса → Адаптация

    💭 Эмоциональные паттерны:
       Эмоциональный лог → Кластер переходов → Понимание

╔══════════════════════════════════════════════════════════════════════════════╗
║  Кластеризация = способ видеть структуру в данных, группировать похожие     ║
║  паттерны, находить аномалии, адаптироваться под кластер пользователя       ║
╚══════════════════════════════════════════════════════════════════════════════╝

